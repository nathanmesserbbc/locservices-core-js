!function(a,b){return"function"==typeof define&&define.amd?define(b):("undefined"==typeof locator&&(a.locator={core:{}}),void(locator.core.API=b()))}(this,function(){"use strict";function a(a,b){var c;for(c in a)a.hasOwnProperty(c)&&!b.hasOwnProperty(c)&&(b[c]=a[c]);return b}function b(b){this._options=a({env:"live",protocol:"http"},b||{}),this._base_uri=this._options.protocol+"://open."+this._options.env+".bbc.co.uk/locator"}b.prototype.getLocation=function(a,b){var d="",e="location";b.params=b.params||{},b.detailTypes&&"[object Array]"===Object.prototype.toString.call(b.detailTypes)&&(e="details",d="/details/"+b.detailTypes.join(","),b.params.vv=2),c(this._base_uri+"/locations/"+encodeURIComponent(a)+d,b,e)},b.prototype.search=function(a,b){b.params=b.params||{},b.params.s=a,c(this._base_uri+"/locations",b,"search")},b.prototype.autoComplete=function(a,b){b.params=b.params||{},b.params.s=a,b.params.a="true",c(this._base_uri+"/locations",b,"autoComplete")},b.prototype.reverseGeocode=function(a,b,d){d.params=d.params||{},d.params.lo=b,d.params.la=a,c(this._base_uri+"/locations",d,"reverseGeocode")},b.prototype.getCookie=function(a,b){b.params=b.params||{},b.params.id=a,c("http://pal.sandbox.dev.bbc.co.uk/locator/default/shared/location.json",b,"cookie")};var c=function(a,b,c){var f,g;g="_locservices_core_api_cb_"+(new Date).getTime()+Math.round(1e5*Math.random()),b.params.format="jsonp",b.params.jsonp=g,window[g]=function(a){delete window[g],document.body.removeChild(f),b.success&&b.success(d(a,c))},f=document.createElement("script"),f.src=a+e(b.params),"function"==typeof b.error&&(f.onerror=b.error),document.body.appendChild(f)},d=function(a,b){var c={};switch(b){case"cookie":c=a;break;case"location":c.location=a.response;break;case"details":c.location=a.response.metadata.location,c.details=a.response.content.details.details;break;case"search":c.results=a.response.locations,c.metadata={totalResults:a.response.totalResults};break;case"autoComplete":c.results=a.response.results.results,c.metadata={totalResults:a.response.results.totalResults};break;case"reverseGeocode":c.results=a.response.results.results}return c},e=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c+"="+encodeURIComponent(a[c]));return"?"+b.join("&")};return b});
//# sourceMappingURL=api.min.map