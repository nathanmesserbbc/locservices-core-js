!function(a,b){return"function"==typeof define&&define.amd?define(b):("undefined"==typeof locator&&(a.locator={core:{}}),void(locator.core.API=b()))}(this,function(){"use strict";function a(a,b){var c;for(c in a)a.hasOwnProperty(c)&&!b.hasOwnProperty(c)&&(b[c]=a[c]);return b}function b(b){this._options=a({env:"live",protocol:"http"},b||{}),this._base_uri=this._options.protocol+"://open."+this._options.env+".bbc.co.uk/locator"}function c(a){var b,c,d={},e=["vv","throwError","language","rows"];a.lat&&(d.la=a.lat),a.lon&&(d.lo=a.lon),a.searchTerm&&(d.s=a.searchTerm);for(b in e)e.hasOwnProperty(b)&&(c=e[b],a.hasOwnProperty(c)&&!d.hasOwnProperty(c)&&(d[c]=a[c]));return d}b.prototype.getLocation=function(a,b){var e="",f="location";b.params=c(b),b.detailTypes&&"[object Array]"===Object.prototype.toString.call(b.detailTypes)&&(f="details",e="/details/"+b.detailTypes.join(","),b.params.vv=2);var g=this._base_uri+"/locations/"+encodeURIComponent(a)+e;d(g,b,f)},b.prototype.search=function(a,b){b.params=c(b||{}),b.params.s=a,d(this._base_uri+"/locations",b,"search")},b.prototype.autoComplete=function(a,b){b.params=c(b||{}),b.params.s=a,b.params.a="true",d(this._base_uri+"/locations",b,"autoComplete")},b.prototype.reverseGeocode=function(a,b,e){e.params=c(e||{}),e.params.lo=b,e.params.la=a,d(this._base_uri+"/locations",e,"reverseGeocode")},b.prototype.getCookie=function(a,b){b.params=b.params||{},b.params.id=a,d("http://pal.sandbox.dev.bbc.co.uk/locator/default/shared/location.json",b,"cookie")};var d=function(a,b,c){var d,g;g="_locservices_core_api_cb_"+(new Date).getTime()+Math.round(1e5*Math.random()),b.params.format="jsonp",b.params.jsonp=g,window[g]=function(a){delete window[g],document.body.removeChild(d),b.success&&b.success(e(a,c))},d=document.createElement("script"),d.src=a+f(b.params),"function"==typeof b.error&&(d.onerror=b.error),document.body.appendChild(d)},e=function(a,b){var c={};switch(b){case"cookie":c=a;break;case"location":c.location=a.response;break;case"details":c.location=a.response.metadata.location,c.details=a.response.content.details.details;break;case"search":c.results=a.response.locations,c.metadata={totalResults:a.response.totalResults};break;case"autoComplete":c.results=a.response.results.results,c.metadata={totalResults:a.response.results.totalResults};break;case"reverseGeocode":c.results=a.response.results.results}return c},f=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c+"="+encodeURIComponent(a[c]));return"?"+b.join("&")};return b});
//# sourceMappingURL=api.min.map